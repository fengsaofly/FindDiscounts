

<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
        <style type="text/css">
            body{
                background-color:#eee;
            }
        </style>
        <link rel="stylesheet" href="./main.css">
          <script type="text/javascript">


        function add(type,content){
            with(document){
                switch(type){
                    case 0:
                        var text=createElement("span");
                        //text.style=style;
                        text.innerHTML=content;
                  		insertNodeAfterSelection(text);
                        break;
                    case 1:
                        var img=createElement("img");
                        img.src=content;
                        img.style.width="20px";
                        img.style.height="20px";
                        insertNodeAfterSelection(img);
                    
                    break;
                    case 2:
                        var mp3=createElement("audio");
                        mp3.controls="controls";
                        mp3.src=content;
                        mp3.type="audio/mpeg";
                        insertNodeAfterSelection(mp3);
                    break;
                }
            }
        }
       
 
        function insertNodeAfterSelection(node) {
            var sel, range, html;
            if (window.getSelection) {
                sel = window.getSelection();
                if (sel.getRangeAt && sel.rangeCount) {
                    range = sel.getRangeAt(0);
                    
                    range.collapse(false);
                    range.insertNode(node);

                    moveCursor(node,sel);
                   
                   InputFocus();
                }
            } 
            // window.setSelectionRange(9, 9);


        }
        function moveCursor(node,sel){
              //move the cursor
            var range = sel.getRangeAt(0);

            range.setStartAfter(node);
            range.setEndAfter(node); 
            sel.removeAllRanges();
            sel.addRange(range);
        }   
        function InputFocus()
        {
             var article = document.getElementById("article");
             article.focus();
        }
  //       function moveEnd(obj){
		    
		//     var len = obj.width;
		      
		//     obj.selectionStart +=  len;
		//     obj.selectionEnd = obj.selectionStart;
		    
		// }

        function removeElement(_element){
                 var _parentElement = _element.parentNode;
                 if(_parentElement){
                        _parentElement.removeChild(_element);
                 }
        }
        function getCursorPos(){
             var article = document.getElementById('article');
            // // article.focus();
            var textarea = document.getElementById('textarea');
            if (window.getSelection) {
                sel = window.getSelection();
                var selectedText = sel.toString();
                alert(selectedText);
                if (sel.getRangeAt && sel.rangeCount) {
                    range = sel.getRangeAt(0);
                    // window.setSelectionRange(9, 9);
                    

                    // textarea.value = article.selectionStart;
                }
            } 
         
          
            // alert();
            // article.focus();
        }
        </script>
    </head>
    <body onload="InputFocus()">
    <!-- <div id="cursorLayer" class="cursorBlink" style="top: 10px; left: 10px; height: 17px; background-color: black;"></div> -->
    <article id="article" class="editor-area android-editor-area" contenteditable="true"></article>
    </article>

    </body>
</html>